"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.list = void 0;
const wallet_api_core_1 = require("@ledgerhq/wallet-api-core");
const rxjs_1 = require("rxjs");
function filterCurrenciesByCurrencyIds(currencies, currencyIds) {
    const currencyIdsSet = new Set(currencyIds);
    return currencies.filter((currency) => currencyIdsSet.has(currency.id));
}
const list = async (req, context) => {
    const safeParams = wallet_api_core_1.schemaCurrencyList.params.parse(req.params);
    const { currencyIds } = safeParams || {};
    const allCurrencies = await (0, rxjs_1.firstValueFrom)(context.currencies$);
    return {
        currencies: currencyIds
            ? filterCurrenciesByCurrencyIds(allCurrencies, currencyIds)
            : allCurrencies,
    };
};
exports.list = list;
